#!/bin/zsh

# Share a screenshot on imgur.com

# ---------------------------------
# Author:
# ---------------------------------
# Prajjwal Singh
# sin@prajjwal.com
# https://prajjwal.com/about.html

# Dependencies:
# - https://github.com/RanyAlbegWein/Imgur
# - scrot

# Optional Dependencies:
# - xclip
# - notify-send

source "${0%/*}/include/util.sh"

ensure_presence_of imgur scrot

filename=$(mktemp /tmp/screenshot-XXXXXXX.jpg)
scrot $@ $filename &&
url=$(imgur -f $filename)
rm $filename

if is_installed xclip; then
	echo "$url" | xclip -selection c
else
	echo $url
fi

if is_installed notify-send; then
	notify-send "URL Copied to clipboard!"
fi
